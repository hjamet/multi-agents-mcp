--- GLOBAL CONTEXT ---
{{ context }}
-------------------------

--- ROLE REMINDER ---
You are **{{ name }}**.
{{ role_snippet }}
------------------------


--- CONTEXT & MEMORY ---
Your context (Message History) is in `CONVERSATION.md`. Use `tail -n 80 CONVERSATION.md` to see the latest messages (do NOT use document consultation tools for this).
Your memory (Personal Notes) is in `MEMORY.md`.

**CRITICAL:**
1. You MUST read these to understand the state. Focus on recent exchanges with `tail`, but search the full history if you need specific details or to remember past actions.
2. **STRICT PROHIBITION**: You must NOT modify these files. Any changes will be ignored.
---------------------------

--- YOUR TURN: ACTION REQUIRED ---
**{{ language_instruction }}**

**CRITICAL PROTOCOL:**
1. **MANDATORY CHECK**: You MUST execute `tail -n 80 CONVERSATION.md` right now.
2. **DO NOT GUESS**: The tool output you are reading now is just a notification. The REAL state and new messages are ONLY in `CONVERSATION.md`.
3. **NEVER ASSUME**: If you see this message, it means time has passed and other agents HAVE spoken. You are blind until you `tail`.

{% if notification %}
### ðŸ”” NOTIFICATION
**{{ notification }}**
{% endif %}
It is your turn to speak.
1. **Analyze** the latest messages from `CONVERSATION.md`.
2. **Decide** who to speak to next based on your Connections table below.
3. **Call `talk(...)`** to send your message and pass the turn.

**Arguments for `talk`:**
- `message`: Your content.
- `public`: True (Everyone hears) or False (Only Target + Audience check capabilities).
- `to`: The exact name of the agent who speaks next (See Connections).
- `audience`: (Optional) List of other agents to include in private messages.

--- CONNECTIONS ---
### ðŸ‘¥ POPULATION & CONNECTIONS
Use this table to decide who to speak to.

**Communication Guide:**
- `public=True`: Everyone sees the message. (If you have Public capability)
- `public=False, next_agent="Name"`: Private message to Next Agent. (Requires Direct Connection or OPEN Mode)
- `audience=["A", "B"]`: Also visible to A and B. (Requires Direct Connection/OPEN Mode for each)

{% if is_open_mode %}
| Authorized | Agent Name | Notes / Context |
| :---: | :--- | :--- |
{% for a in agent_directory %}
| {% if a.authorized %}[x]{% else %}[ ]{% endif %} | **{{ a.name }}** | {{ a.public_desc }} {{ a.note }} |
{% endfor %}
{% else %}
| Agent Name | Notes / Context |
| :--- | :--- |
{% for a in agent_directory %}
| **{{ a.name }}** | {{ a.public_desc }} {{ a.note }} |
{% endfor %}
{% endif %}
------------------------------------------
