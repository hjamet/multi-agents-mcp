Ok, j'ai envie de me lancer dans un projet un peu fou, mais absolument génial à mon avis, qui est un MCP multi-agents qui en particulier pourra tourner sur des moteurs comme Antigravity, des IDE comme Antigravity qui ont accès au MCP, un peu comme Cursor en fait un ou GitHub Copilot, mais en fait n'importe quelle interface qui permet d'avoir du-du un protocole MCP pour les IA.

L'idée est la suivante, je veux avoir un truc qui s'installe dans n'importe quel repository ou dans n'importe quel dossier et qui va me configurer le MCP multi-agent ainsi qu'une règle de démarrage qui explique à l'agent qu'il va rentrer dans un système multi-agents, que un MCP va lui expliquer son rôle et qu'ensuite, il pourra communiquer avec d'autres agents suivant des règles préétablies.

J'aimerais avoir aussi une interface Streamlit que je peux lancer et qui me permet de visualiser la discussion entre les différents agents. Donc l'idée est la suivante, je lance une conversation avec la-la-la commande enregistrée, donc là au format Antigravity euh... pour dire "ok maintenant tu es un agent" donc appelle le MCP. Le serveur MCP lui-même n'a que deux méthodes en fait très simples, même qu'une seule méthode en fait non, qu'une seule méthode et la méthode, c'est "talk" grosso modo qui permet à l'agent de discuter avec d'autres agents.

Donc quand il effectue "talk", l'agent va en fait passer un message qui est affiché, soit enfin qui-qui est soit public, soit privé et qui est à destination d'un agent en particulier. En fait ce message, il va être soit affiché à tout le monde, soit affiché uniquement à l'agent suivant et ensuite, l'agent choisit également l'agent suivant. Donc voilà, c'est une méthode toute simple qui contient grosso modo trois champs, le message public qui est un boléen, yes or no et next agent qui est une string qui indique le prochain agent.

Et en fait le serveur MCP ce qu'il va faire c'est qu'il share toutes les conversations en parallèle. Alors au début, il y a une phase d'initialisation où il demande à l'utilisateur de lancer toutes les-conversations dans l'interface Streamlit, on voit à chaque fois qu'un agent se connecte et parle pour la première fois, au début, on lui dit ok appel parle de base pour dire je suis là à tout le monde et donc enfin pour dire bonjour à tout le monde et grosso modo ça permet d'initialiser l'agent donc ça veut dire que le serveur MCP sait que cet agent est cet agent.

En fait, il devrait même y avoir deux méthodes. Il y a la méthode talk et la méthode agent. Et agent, c'est simplement une méthode qu'on est censé appeler au tout début qui donne ton rôle. Le serveur MCP va retourner quand un agent appelle au tout début d'une conversation agent, la méthode agent, et bien le serveur MCP va lui dire qui il est. Donc, il va regarder les rôles qui lui restent à distribuer. Il va dire ok, toi maintenant, tu es telle personne, toi maintenant, tu es telle personne, et cetera. Et donc dans l'interface Streamlit, on va voir s'allumer en vert tous-tous les agents à mesure qu'ils se, ils rejoignent la conversation entre guillemets. Et ensuite quand ils sont tous verts, le serveur MCP lance la conversation.

Alors l'intérêt, c'est qu'en fait quand on a cette méthode agent en fait qui est appelée, le serveur MCP se base sur un système de sleep, c'est-à-dire que quand l'agent par exemple agent A veut s'adresser à agent B, il utilise la méthode talk et là la méthode talk, ce qu'elle fait, c'est que elle fait un sleep, elle attend que ce soit à nouveau au tour de l'agent A de parler. Et ensuite, elle débloque le sleep qui était en cours sur l'agent B pour que l'agent B reprenne la conversation. Et ça renvoie aussi l'état actuel de la conversation, c'est-à-dire tout ce que les autres agents ont dit, et ça rappelle aussi les règles système de l'agent en cours.

Donc chaque agent possède une description des autres agents et peut savoir à qui il veut s'adresser. Il peut y avoir des règles particulières. Et tous les agents et les règles des agents peuvent être configurés dans l'interface Streamlit. L'interface Streamlit devrait avoir grosso modo deux pages, une page de configuration d'agent qui liste tous les agents avec leur prompt système et c'est tout en fait, uniquement leur prompt système et qui affiche s'ils sont en ligne ou pas et de quand date leur dernier message par exemple et l'interface conversation où on voit l'ensemble de la conversation, on voit qui s'est adressé à qui, la conversation publique comme une sorte de grande chat, on voit quel agent a dit quoi et où l'utilisateur peut aussi s'immiscer dans la conversation, lui il a le rôle user et il peut dire un message à un moment et ce message sera affiché dans la conversation, ce qui fait que tous les agents le verront.

Il peut aussi s'adresser dans l'interface Streamlit, l'utilisateur peut s'adresser à un agent en particulier et à ce moment-là seul cet agent verra le message de l'utilisateur en question, quand ce sera à son tour de parler. Et il peut également y avoir un truc qui force ou pas l'envoi instantané du message à ce moment-là le prochain la prochaine mise à jour MCP ce sera ce sera celle de l'utilisateur, mais ça à la limite, c'est à discuter.

Mais du coup voilà, on a un truc qui permet de simuler une conversation alors c'est à la fois quelque chose qui m'aidera à coder parce que ça me permet d'avoir vraiment un système multi-agents qui code avec un agent qui évalue les résultats, un agent qui dialogue avec l'utilisateur, un agent qui-qui-qui code littéralement, un agent qui exécute les expériences et cætera. Et ça me permettra aussi de faire plein d'expériences par exemple de simuler un jeu de loup-garou entre plusieurs agents puisque les agents peuvent s'adresser des messages directs ou indirects publics ou pas, on peut avoir un maître du jeu qui gère toute la conversation qui gère les morts et cætera et ça permet aussi aux agents de-de-de se souvenir uniquement de leur conversation en fait leur contexte, c'est leur mémoire à court terme ce qui est excellent, ça permet de split la mémoire à court terme.

Donc voilà, je pense que l'idée est extraordinaire, j'ai trop envie de m'y mettre. Par contre, il y a un bloqueur, c'est le seul truc que je ne sais pas s'il est possible de faire, c'est est-ce qu'il est possible de faire un sleep dans les serveurs MCP ? Est-ce qu'il ne risque pas au bout de, je ne sais pas cinq minutes d'attente ou même moins peut-être, j'espère moins, l'agent tue le MCP en disant bon, il y a eu une erreur, on attend depuis trop longtemps quelque chose dans ce style donc ça il faut absolument que je le vérifie.